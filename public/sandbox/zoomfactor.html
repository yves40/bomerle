<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zoom factor</title>
</head>
<body>
  <div class="container">
    <div class="inner-container">
      <p>
        Cet exemple illustre les effets d'un zooom ou d'un dézoom de la page (mais
        aussi du déplacement de la fenêtre vers un écran avec un autre facteur
        d'échelle) sur la valeur de la propriété
        <code>Window.devicePixelRatio</code>. Essayez de zoomer et voyez le
        résultat !
      </p>
    </div>
    <div class="pixel-ratio"></div>
  </div>  
</body>
<style>
  body {
    font:
      22px arial,
      sans-serif;
  }
  
  .container {
    top: 2em;
    width: 22em;
    height: 14em;
    border: 2px solid #22d;
    margin: 0 auto;
    padding: 0;
    background-color: #a9f;
  }
  
  .inner-container {
    padding: 1em 2em;
    text-align: justify;
    text-justify: auto;
  }
  
  .pixel-ratio {
    position: relative;
    margin: auto;
    height: 1.2em;
    text-align: right;
    bottom: 0;
    right: 1em;
    font-weight: bold;
  }
  
</style>
<script>
  let remove = null;

const updatePixelRatio = () => {
  if (remove != null) {
    remove();
  }
  let mqString = `(resolution: ${window.devicePixelRatio}dppx)`;
  let media = matchMedia(mqString);
  media.addEventListener("change", updatePixelRatio);
  remove = function () {
    media.removeEventListener("change", updatePixelRatio);
  };

  console.log("devicePixelRatio: " + window.devicePixelRatio);
};
updatePixelRatio();

</script>
</html>